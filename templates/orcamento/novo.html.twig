{% extends 'base.html.twig' %}

{% block body %}
<div class="container mt-5">
    <h1 class="mb-4">Cadastrar Orçamento</h1>

    <div class="card shadow-sm">
        <div class="card-body">
            {{ form_start(form, {'attr': {'class': 'needs-validation', 'novalidate': 'novalidate'}}) }}
                
                <h3 class="mt-3">Cliente</h3>
                <div class="row mb-3">
                    <div class="col-md-6">
                        {{ form_row(form.nomeCliente, {'attr': {'class': 'form-control'}}) }}
                    </div>
                    <div class="col-md-6">
                        {{ form_row(form.contatoCliente, {'attr': {'class': 'form-control'}}) }}
                    </div>
                </div>

                <h3 class="mt-3">Orçamento</h3>
                <!-- Controlador Stimulus -->
                <div class="row mb-3" data-controller="service">
                    <!-- Serviço -->
                    <div class="col-md-6">
                        <label for="id_servico">Serviço</label>
                        <select id="id_servico" 
                                name="id_servico" 
                                class="form-select" 
                                data-service-target="servico"
                                data-action="change->service#update">
                        </select>
                    </div>

                    <!-- Quantidade -->
                    <div class="col-md-6">
                        <label for="qtd">Quantidade</label>
                        <input 
                            type="range" 
                            id="qtd" 
                            name="qtd" 
                            class="form-range"
                            min="0" 
                            max="100" 
                            value="1" 
                            step="5"
                            data-service-target="range"
                            data-action="input->service#update"
                        />
                        <span class="form-text" data-service-target="valueLabel">1 m²</span>
                    </div>

                    <!-- Preço Total -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <h5>Preço Total: <span data-service-target="priceDisplay">R$ 0.00</span></h5>
                        </div>
                    </div>
                </div> 

                <!-- Botão -->
                {{ form_widget(form._token) }} {# CSRF Token #}
                <button class="btn btn-success px-4">Salvar</button>
            {{ form_end(form, {'render_rest': false}) }}
        </div>
    </div>
</div>
{% endblock %}
